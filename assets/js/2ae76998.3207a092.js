"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[4132],{897:e=>{e.exports=JSON.parse('{"permalink":"/node-js-fork-is-slow-deal-with-it","source":"@site/blog/node-js-fork-is-slow-deal-with-it.md","title":"Node.js fork is slow; Deal with it","description":"Dealing with Node.js fork slowness","date":"2021-09-27T00:00:00.000Z","tags":[{"inline":true,"label":"development","permalink":"/tags/development"},{"inline":true,"label":"battlefield","permalink":"/tags/battlefield"},{"inline":true,"label":"nodejs","permalink":"/tags/nodejs"},{"inline":true,"label":"javascript","permalink":"/tags/javascript"},{"inline":true,"label":"no_silver_bullet","permalink":"/tags/no-silver-bullet"}],"readingTime":4.68,"hasTruncateMarker":true,"authors":[{"name":"Alexander Lolis","title":"Software Engineer","url":"https://github.com/alolis","imageURL":"https://avatars.githubusercontent.com/u/82233?v=4","key":"alolis","page":null}],"frontMatter":{"slug":"node-js-fork-is-slow-deal-with-it","title":"Node.js fork is slow; Deal with it","date":"2021-09-27T00:00:00.000Z","description":"Dealing with Node.js fork slowness","authors":"alolis","tags":["development","battlefield","nodejs","javascript","no_silver_bullet"]},"unlisted":false,"prevItem":{"title":"My 2021 reads","permalink":"/my-2021-reads"},"nextItem":{"title":"Riding the bull; the npm package, that is","permalink":"/riding-the-bull"}}')},8230:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var o=s(897),i=s(4848),n=s(8453);const l={slug:"node-js-fork-is-slow-deal-with-it",title:"Node.js fork is slow; Deal with it",date:new Date("2021-09-27T00:00:00.000Z"),description:"Dealing with Node.js fork slowness",authors:"alolis",tags:["development","battlefield","nodejs","javascript","no_silver_bullet"]},r=void 0,a={authorsImageUrls:[void 0]},d=[];function c(e){const t={a:"a",code:"code",li:"li",ol:"ol",p:"p",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Yes. I know. Forking a process in ",(0,i.jsx)(t.code,{children:"Node.js"})," is slow. Instead of crying about it, let's see how we can handle it!"]}),"\n",(0,i.jsx)(t.p,{children:"Let's assume that you have a service in which you:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Accept a request"}),"\n",(0,i.jsxs)(t.li,{children:["Fork a process with ",(0,i.jsx)(t.a,{href:"https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options",children:(0,i.jsx)(t.code,{children:"child_process.fork"})})]}),"\n",(0,i.jsx)(t.li,{children:"Execute some code within that process"}),"\n",(0,i.jsx)(t.li,{children:"Exit from the child process"}),"\n",(0,i.jsx)(t.li,{children:"Complete the request"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Probably the first thing you tried was to receive the request, spin up a process, do whatever you need in the processor, and exit. You timed the whole thing and your jaw dropped that it took a million years for the request to complete, even if you are just doing a ",(0,i.jsx)(t.code,{children:"console.log('I love kittens')"})," inside your processor."]}),"\n",(0,i.jsx)(t.p,{children:"Don't bother. I will tell you right now that the bottleneck is the forking."})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>r});var o=s(6540);const i={},n=o.createContext(i);function l(e){const t=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(n.Provider,{value:t},e.children)}}}]);